repositories:
  - name: stable
    url: https://charts.helm.sh/stable
  - name: bitnami
    url: https://charts.bitnami.com/bitnami
  - name: ingress-nginx
    url: https://kubernetes.github.io/ingress-nginx

environments:
  local: {}
  dev: {}
  prod: {}

releases:
  - name: external-dns
    namespace: kube-system
    chart: bitnami/external-dns
    values:
      - provider: aws
      - aws:
          zoneType: public
      - txtOwnerId: postrix
      - serviceAccount:
          create: true
          name: external-dns
          annotations:
            eks.amazonaws.com/role-arn: arn:aws:iam::384389382109:role/postrix-external-dns-policy

  - name: nginx
    namespace: ingress-nginx
    chart: ingress-nginx/ingress-nginx
    labels:
      app: nginx

  - name: redis
    namespace: "{{ default .Namespace .Environment.Name }}"
    chart: bitnami/redis
    labels:
      app: redis
    values:
      - ./redis/values/{{ .Environment.Name }}.yaml

  - name: core
    namespace: "{{ default .Namespace .Environment.Name }}"
    chart: ./core
    labels:
      app: core
    values:
      - ./core/values/{{ .Environment.Name }}.yaml
