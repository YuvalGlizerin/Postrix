<!doctype html>
<html lang="en">

<head>
	<title>Joblify Dashboard</title>
	<meta http-equiv="Content-Type" content="charset=utf-8" />
	<meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
	<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0">
	<!-- Icons -->
	<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
	<!-- Login Page CSS -->
	<link rel="stylesheet" type="text/css" href="css/util.css">
	<link rel="stylesheet" type="text/css" href="css/main.css">
	<!-- VENDOR CSS -->
	<link rel="stylesheet" href="assets/vendor/bootstrap/css/bootstrap.min.css">
	<link rel="stylesheet" href="assets/vendor/font-awesome/css/font-awesome.min.css">
	<link rel="stylesheet" href="assets/vendor/linearicons/style.css">
	<link rel="stylesheet" href="assets/vendor/chartist/css/chartist-custom.css">
	<!-- MAIN CSS -->
	<link rel="stylesheet" href="assets/css/main.css">
	<!-- FOR DEMO PURPOSES ONLY. You should remove this in your project -->
	<link rel="stylesheet" href="assets/css/demo.css">
	<!-- GOOGLE FONTS -->
	<link href="https://fonts.googleapis.com/css?family=Source+Sans+Pro:300,400,600,700" rel="stylesheet">
	<!-- ICONS -->
	<link rel='shortcut icon' type='image/x-icon' href='images/favicon.ico' />
	<!-- Date Range Picker -->
	<link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/npm/daterangepicker/daterangepicker.css" />
	<!-- Filter Icon -->
	
	<style>
		td {
			direction: rtl;
		}
		.unselectable {
			-webkit-touch-callout: none;
			-webkit-user-select: none;
			-khtml-user-select: none;
			-moz-user-select: none;
			-ms-user-select: none;
			user-select: none;
		}
		#myModalApplicant {
			padding-right: 17px !important;
    		padding-left: 17px !important;
		}
		#myModalUser {
			padding-right: 17px !important;
			padding-left: 17px !important;
		}
		@media screen and (max-width: 430px) {
			#formsSideButtonFather {
				display: none !important;
			}
		}
	</style>
</head>

<body>
	<!-- Login Page -->
	<div style="display: none; direction: ltr; text-align: left;" id="loginPage" class="limiter">
		<div class="container-login100">
			<div class="wrap-login100 p-l-85 p-r-85 p-t-55 p-b-55">
				<form class="login100-form validate-form flex-sb flex-w">
					<span class="login100-form-title p-b-32">
						Account Login
					</span>

					<span class="txt1 p-b-11">
						Email
					</span>
					<div class="wrap-input100 validate-input m-b-36" data-validate="Username is required">
						<input class="input100" type="text" name="username" id="usernameLogin">
						<span class="focus-input100"></span>
					</div>

					<span class="txt1 p-b-11">
						Password
					</span>
					<div class="wrap-input100 validate-input m-b-12" data-validate="Password is required">
						<input class="input100" type="password" name="pass" id="passwordLogin">
						<span class="focus-input100"></span>
					</div>

					<div class="flex-sb-m w-full p-b-48">
						<div>
							<a href="register.html" class="txt3">
								Register
							</a>
						</div>

						<div>
							<a id="resetPassword" href="forgot_password.html" class="txt3">
								Forgot Password?
							</a>
						</div>
					</div>

					<div class="container-login100-form-btn">
						<button class="login100-form-btn" id="login">
							Login
						</button>
					</div>

				</form>
			</div>
		</div>
	</div>

	<!-- Admin Page -->
	<div style="display: none;" id="adminPage">
		<!-- WRAPPER -->
		<div id="wrapper">
			<!-- NAVBAR -->
			<nav class="navbar navbar-default navbar-fixed-top" style="position: static;">
				<div class="ua" style="float: right;margin: 16px 0 0 0;position: relative;min-width: 180px;">
					<a class="fn" href="#"
						style="margin: 10px 14px 0 0;float: right;margin-top: 5px;font-size: 20px;color: #333;pointer-events: none;">
						<b>סוכן </b>
						<span id="navbarNameTitle"></span>
					</a>
				</div>
				<div class="navbar-form" style="margin-left: 13px !important;">
					<div class="">
						<span id="logout" class=""><button id="logout_button" type="button"
								class="btn btn-primary">התנתק</button></span>
					</div>
				</div>
			</nav>
			<!-- END NAVBAR -->
			<nav class="navbar navbar-default navbar-fixed-top" style="position: static;background: #00BFBA;">
				<div style="display: table;height: 80px;overflow: hidden;">
			  <div style="display: table-cell;vertical-align: middle;color: white;font-size: 22px;padding-right: 15px;">
				<div id="jobsSideButton" onclick="activate('Jobs')" style="
				cursor: pointer;text-decoration: underline;
			">משרות</div>
			  </div><div style="display: table-cell;vertical-align: middle;color: white;font-size: 22px;padding-right: 30px;">
				<div id="applicantsSideButton" onclick="activate('Applicants')" style="
				cursor: pointer;
			">מועמדים</div>
			  </div>
			  <div id="usersSideButtonFather" style="display: none;vertical-align: middle;color: white;font-size: 22px;padding-right: 30px;">
				<div id="usersSideButton" onclick="activate('Users')" style="
				cursor: pointer;
			">משתמשים</div>
			  </div>
			  <div id="formsSideButtonFather" style="display: table-cell;vertical-align: middle;color: white;font-size: 22px;padding-right: 30px;">
				<div id="formsSideButton" onclick="activate('Forms')" style="
				cursor: pointer;
			">טפסים</div>
			  </div>
			</div>
							
						</nav>
			<!-- END LEFT SIDEBAR -->
			<!-- MAIN -->
			<div style="width: 100%;" class="main">
				<!-- MAIN CONTENT -->
				<div class="main-content">
					<div class="container-fluid">
						<div class="row" style="direction: ltr;">
							<div>
								<div id="jobsPanel" class="panel">
									<div class="panel-heading">
										<h3 id="titleActiveJobs" style="float: right; direction: rtl;" class="panel-title">משרות</h3>
										<svg class="unselectable" id="filter" onclick="toggleFilter()" viewBox="-5 0 394 394.00003" xmlns="http://www.w3.org/2000/svg" style="display: none;width: 20px;float: left;height: 20px;cursor: pointer;position: relative;top: -1px;"><path xmlns="http://www.w3.org/2000/svg" d="m367.820312 0h-351.261718c-6.199219-.0117188-11.878906 3.449219-14.710938 8.960938-2.871094 5.585937-2.367187 12.3125 1.300782 17.414062l128.6875 181.285156c.042968.0625.089843.121094.132812.183594 4.675781 6.3125 7.207031 13.960938 7.21875 21.816406v147.800782c-.027344 4.375 1.691406 8.582031 4.773438 11.6875 3.085937 3.101562 7.28125 4.851562 11.65625 4.851562 2.222656-.003906 4.425781-.445312 6.480468-1.300781l72.3125-27.570313c6.476563-1.980468 10.777344-8.09375 10.777344-15.453125v-120.015625c.011719-7.855468 2.542969-15.503906 7.214844-21.816406.042968-.0625.089844-.121094.132812-.183594l128.691406-181.289062c3.667969-5.097656 4.171876-11.820313 1.300782-17.40625-2.828125-5.515625-8.511719-8.9765628-14.707032-8.964844zm0 0" fill="#02acf6"></path></svg>
										<svg class="unselectable" id="noFilter" onclick="toggleFilter()" viewBox="-5 0 394 394.00003" xmlns="http://www.w3.org/2000/svg" style="width: 20px;float: left;height: 20px;cursor: pointer;position: relative;top: -1px;"><path xmlns="http://www.w3.org/2000/svg" fill="#02acf6" d="m368.3125 0h-351.261719c-6.195312-.0117188-11.875 3.449219-14.707031 8.960938-2.871094 5.585937-2.3671875 12.3125 1.300781 17.414062l128.6875 181.28125c.042969.0625.089844.121094.132813.183594 4.675781 6.3125 7.203125 13.957031 7.21875 21.816406v147.796875c-.027344 4.378906 1.691406 8.582031 4.777344 11.6875 3.085937 3.105469 7.28125 4.847656 11.65625 4.847656 2.226562 0 4.425781-.445312 6.480468-1.296875l72.3125-27.574218c6.480469-1.976563 10.78125-8.089844 10.78125-15.453126v-120.007812c.011719-7.855469 2.542969-15.503906 7.214844-21.816406.042969-.0625.089844-.121094.132812-.183594l128.683594-181.289062c3.667969-5.097657 4.171875-11.820313 1.300782-17.40625-2.832032-5.511719-8.511719-8.9726568-14.710938-8.960938zm-131.53125 195.992188c-7.1875 9.753906-11.074219 21.546874-11.097656 33.664062v117.578125l-66 25.164063v-142.742188c-.023438-12.117188-3.910156-23.910156-11.101563-33.664062l-124.933593-175.992188h338.070312zm0 0"/></svg>
										<span class="unselectable" id="star" onclick="toggleStar()" style="cursor: pointer;font-size: 30px;color: #00aaff;float: left;position: relative;top: -13px;margin-left: 8px;">&star;</span>
										<svg class="unselectable" id="emptyFlame" onclick="toggleFlame()" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" version="1.1" id="Layer_1" x="0px" y="0px" viewBox="0 0 512.019 512.019" style="float: left;height: 23px;cursor: pointer;margin-left: 8px;position: relative;top: -3px;" xml:space="preserve"><path fill="#02acf6" d="M447.28,304.8l-0.365-5.01c-5.865-76.354-41.417-124.219-72.781-166.438c-29.042-39.094-54.125-72.854-54.125-122.667    c0-4-2.24-7.656-5.792-9.49c-3.563-1.844-7.844-1.542-11.083,0.813c-47.104,33.708-86.406,90.521-100.135,144.729    c-9.531,37.74-10.792,80.167-10.969,108.188c-43.5-9.292-53.354-74.365-53.458-75.073c-0.49-3.375-2.552-6.313-5.552-7.917    c-3.031-1.583-6.594-1.698-9.667-0.177c-2.281,1.104-55.99,28.396-59.115,137.375c-0.219,3.625-0.229,7.25-0.229,10.885    c0,105.865,86.135,192,192,192s192-86.135,192-192C448.009,314.706,447.645,309.748,447.28,304.8z M256.009,490.685    c-35.292,0-64-30.583-64-68.177c0-1.281-0.01-2.573,0.083-4.156c0.427-15.854,3.438-26.677,6.74-33.875    c6.188,13.292,17.26,25.51,35.219,25.51c5.896,0,10.667-4.771,10.667-10.667c0-15.188,0.313-32.708,4.094-48.521    c3.365-14.031,11.406-28.938,21.594-40.896c4.531,15.521,13.365,28.083,21.99,40.344c12.344,17.542,25.104,35.677,27.344,66.604    c0.135,1.833,0.271,3.677,0.271,5.656C320.009,460.102,291.301,490.685,256.009,490.685z M323.421,476.748    c11.072-15.099,17.922-33.763,17.922-54.24c0-2.51-0.156-4.844-0.469-9.208c-2.531-34.823-17.667-56.344-31.031-75.333    c-11.385-16.167-21.208-30.135-21.208-49.948c0-4.052-2.292-7.75-5.917-9.552c-3.604-1.813-7.958-1.406-11.177,1.042    c-20.458,15.458-37.521,41.479-43.479,66.323c-3.042,12.74-4.104,26.521-4.479,37.854c-7.396-7.958-9.688-22.708-9.708-22.906    c-0.479-3.427-2.583-6.417-5.656-8.01c-3.052-1.583-6.708-1.625-9.781-0.042c-2.688,1.375-26.302,14.917-27.656,64.729    c-0.094,1.688-0.104,3.375-0.104,5.052c0,20.477,6.85,39.141,17.922,54.24c-60.664-26.195-103.255-86.563-103.255-156.729    c0-3.198-0.01-6.385,0.208-9.938c1.833-63.938,22.292-95.646,35.646-109.635c9.312,33.333,33.708,76.906,81.479,76.906    c5.896,0,10.667-4.771,10.667-10.667c0-35.698,0.802-76.948,10.344-114.719c10.833-42.792,40.51-89,76.333-120.281    c5.948,45.688,30.833,79.188,56.99,114.385c31.094,41.854,63.24,85.135,68.625,155.219l0.365,5.104    c0.333,4.438,0.677,8.865,0.677,13.625C426.676,390.185,384.085,450.553,323.421,476.748z"></path></svg>
										<svg class="unselectable" id="fullFlame" onclick="toggleFlame()" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" version="1.1" id="Layer_1" x="0px" y="0px" viewBox="0 0 512.019 512.019" style="display: none;float: left;height: 23px;cursor: pointer;margin-left: 8px;position: relative;top: -3px;" xml:space="preserve"><path fill="#02acf6" xmlns="http://www.w3.org/2000/svg" d="M446.906,299.769c-5.865-76.359-41.417-124.21-72.781-166.436C345.083,94.241,320,60.483,320,10.685    c0-4-2.24-7.656-5.792-9.489c-3.563-1.844-7.844-1.542-11.083,0.812c-47.104,33.706-86.406,90.515-100.135,144.719    c-9.531,37.737-10.792,80.161-10.969,108.18c-43.5-9.291-53.354-74.359-53.458-75.068c-0.49-3.375-2.552-6.312-5.552-7.916    c-3.031-1.583-6.594-1.698-9.667-0.177c-2.281,1.104-55.99,28.394-59.115,137.355C64.01,312.726,64,316.362,64,319.997    c0,105.857,86.135,191.987,192,191.987c0.146,0.01,0.302,0.031,0.427,0c0.042,0,0.083,0,0.135,0    C362.167,511.681,448,425.667,448,319.997C448,314.674,446.906,299.769,446.906,299.769z M256,490.652    c-35.292,0-64-30.581-64-68.172c0-1.281-0.01-2.573,0.083-4.156c0.427-15.853,3.438-26.675,6.74-33.873    c6.188,13.291,17.25,25.509,35.219,25.509c5.896,0,10.667-4.771,10.667-10.666c0-15.186,0.313-32.706,4.094-48.518    c3.365-14.02,11.406-28.936,21.594-40.893c4.531,15.52,13.365,28.081,21.99,40.341c12.344,17.54,25.104,35.675,27.344,66.6    c0.135,1.833,0.271,3.677,0.271,5.656C320,460.07,291.292,490.652,256,490.652z"/></svg>
									</div>
									<div id="search" style="display: none;width: 100%;margin-top: 12px;margin-bottom: 0px;">
										<input type="text" id="freeSearch" value="" class="form-control" placeholder="חיפוש חופשי..." style="direction: rtl;text-align: right;float: right;display: inline;width: 98%;margin-right: 1%;margin-left: 1%;margin-bottom: 10px;">
										<span onclick="search()" class="input-group-btn" style="display: none;"><button id="search_button" type="button" class="btn btn-primary" style="">הפעל סינון</button></span>
										<select class="form-control" id="categorySearch" style="direction: rtl;text-align: right;float: left;width: 98%;margin-right: 1%;margin-left: 1%;margin-bottom: 10px;">
											<option class="category" value="" selected>כל הקטגוריות</option>
											<option class="category" value="אדמיניסטרציה">אדמיניסטרציה</option>
											<option class="category" value="ביוטכנולוגיה">ביוטכנולוגיה</option>
											<option class="category" value="הייטק">הייטק</option>
											<option class="category" value="הנדסה">הנדסה</option>
											<option class="category" value="חוק ומשפט">חוק ומשפט</option>
											<option class="category" value="כללי">כללי</option>
											<option class="category" value="כספים כלכלה וביטוח">כספים כלכלה וביטוח</option>
											<option class="category" value="מכירות ושירות לקוחות">מכירות ושירות לקוחות</option>
										</select>
										<select class="form-control" id="areaSearch" style="direction: rtl;text-align: right;float: left;width: 98%;margin-right: 1%;margin-left: 1%;margin-bottom: 10px;">
											<option class="area" value="" selected>כל האזורים</option>
											<option class="area" value="צפון">צפון</option>
											<option class="area" value="מרכז">מרכז</option>
											<option class="area" value="ירושלים והסביבה">ירושלים והסביבה</option>
											<option class="area" value="דרום">דרום</option>
										</select>
									</div>
									<div class="panel-body no-padding">
										<table id="tableJobs" class="table table-striped">
											<thead>
												<tr>
													<th class="resolutionDisplay">תקופת אחריות</th>
													<th>עמלת השמה</th>
													<th class="resolutionDisplay">מיקום המשרה</th>
													<th>שם המשרה</th>
													<th>מס׳ משרה</th>
													<th class="resolutionDisplay"></th>
												</tr>
											</thead>
											<tbody id="tbodyJobs">
											</tbody>
										</table>
									</div>
								</div>
								<div style="display: none;" id="applicantsPanel" class="panel">
									<div class="panel-heading">
										<h3 style="float: right;" class="panel-title">מועמדים</h3>
									</div>
									<div class="panel-body no-padding">
										<table id="tableApplicants" class="table table-striped">
											<thead>
												<tr>
													<th>סטטוס</th>
													<th class="resolutionDisplay">תקופת אחריות</th>
													<th class="resolutionDisplay">עמלת השמה</th>
													<th>שם המועמד</th>
													<th>שם המשרה</th>
													<th class="resolutionDisplay">מס׳ משרה</th>
												</tr>
											</thead>
											<tbody id="tbodyApplicants">
											</tbody>
										</table>
									</div>
								</div>
								<div style="display: none;" id="usersPanel" class="panel">
									<div class="panel-heading">
										<h3 style="float: right;" class="panel-title">משתמשים</h3>
									</div>
									<div class="panel-body no-padding">
										<table id="tableUsers" class="table table-striped">
											<thead>
												<tr>
													<th>סטטוס</th>
													<th>שם</th>
													<th>מזהה</th>
												</tr>
											</thead>
											<tbody id="tbodyUsers">
											</tbody>
										</table>
									</div>
								</div>
								<div style="display: none;" id="formsPanel" class="panel">
									<div class="panel-heading">
										<h3 style="float: right;" class="panel-title">טפסים</h3>
									</div>
									<div class="panel-body no-padding">
										<table id="tableForms" class="table table-striped">
											<thead>
												<tr>
													<th></th>
													<th>תיאור המסמך</th>
												</tr>
											</thead>
											<tbody id="tbodyForms">
												<tr class="tablerow" onclick="window.open('./forms/שאלות נפוצות.pdf', '_blank')">
													<td><i style="float: left; font-size: 25px; color: #00aaff;" class="fa fa-download"></i></td>
													<td>שאלות נפוצות ומענה מפורט עליהן</td>
												</tr>
												<tr class="tablerow" onclick="window.open('./forms/דגשים והערות לסוכני השמה.pdf', '_blank')">
													<td><i style="float: left; font-size: 25px; color: #00aaff;" class="fa fa-download"></i></td>
													<td>דגשים חשובים והערות לסוכני ההשמה</td>
												</tr>
												<tr class="tablerow" onclick="window.open('./forms/תהליך עבודה.pdf', '_blank')">
													<td><i style="float: left; font-size: 25px; color: #00aaff;" class="fa fa-download"></i></td>
													<td>תהליך עבודה</td>
												</tr>
											</tbody>
										</table>
									</div>
								</div>
							</div>
						</div>
					</div>
				</div>
				<!-- END MAIN CONTENT -->
			</div>
			<!-- END MAIN -->
			<div class="clearfix"></div>
		</div>
		<!-- END WRAPPER -->
		<!-- Modal Job -->
		<div class="modal" id="myModal" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
			<div class="vertical-alignment-helper">
				<div class="modal-dialog vertical-align-center" role="document">
					<div class="modal-content">
						<div class="modal-header">
							<div style="float: right;">
								<span onclick="modalStarClick()" class="unselectable" id="modalStar" style="cursor: pointer;font-size: 26px;color: #00aaff;">☆</span>
								<svg class="unselectable" id="emptyFlameModal" onclick="toggleFlameModal()" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" version="1.1" x="0px" y="0px" viewBox="0 0 512.019 512.019" style="display: none;height: 19px;cursor: pointer;margin-right: 5px;margin-top: 7px;" xml:space="preserve"><path fill="#02acf6" d="M447.28,304.8l-0.365-5.01c-5.865-76.354-41.417-124.219-72.781-166.438c-29.042-39.094-54.125-72.854-54.125-122.667    c0-4-2.24-7.656-5.792-9.49c-3.563-1.844-7.844-1.542-11.083,0.813c-47.104,33.708-86.406,90.521-100.135,144.729    c-9.531,37.74-10.792,80.167-10.969,108.188c-43.5-9.292-53.354-74.365-53.458-75.073c-0.49-3.375-2.552-6.313-5.552-7.917    c-3.031-1.583-6.594-1.698-9.667-0.177c-2.281,1.104-55.99,28.396-59.115,137.375c-0.219,3.625-0.229,7.25-0.229,10.885    c0,105.865,86.135,192,192,192s192-86.135,192-192C448.009,314.706,447.645,309.748,447.28,304.8z M256.009,490.685    c-35.292,0-64-30.583-64-68.177c0-1.281-0.01-2.573,0.083-4.156c0.427-15.854,3.438-26.677,6.74-33.875    c6.188,13.292,17.26,25.51,35.219,25.51c5.896,0,10.667-4.771,10.667-10.667c0-15.188,0.313-32.708,4.094-48.521    c3.365-14.031,11.406-28.938,21.594-40.896c4.531,15.521,13.365,28.083,21.99,40.344c12.344,17.542,25.104,35.677,27.344,66.604    c0.135,1.833,0.271,3.677,0.271,5.656C320.009,460.102,291.301,490.685,256.009,490.685z M323.421,476.748    c11.072-15.099,17.922-33.763,17.922-54.24c0-2.51-0.156-4.844-0.469-9.208c-2.531-34.823-17.667-56.344-31.031-75.333    c-11.385-16.167-21.208-30.135-21.208-49.948c0-4.052-2.292-7.75-5.917-9.552c-3.604-1.813-7.958-1.406-11.177,1.042    c-20.458,15.458-37.521,41.479-43.479,66.323c-3.042,12.74-4.104,26.521-4.479,37.854c-7.396-7.958-9.688-22.708-9.708-22.906    c-0.479-3.427-2.583-6.417-5.656-8.01c-3.052-1.583-6.708-1.625-9.781-0.042c-2.688,1.375-26.302,14.917-27.656,64.729    c-0.094,1.688-0.104,3.375-0.104,5.052c0,20.477,6.85,39.141,17.922,54.24c-60.664-26.195-103.255-86.563-103.255-156.729    c0-3.198-0.01-6.385,0.208-9.938c1.833-63.938,22.292-95.646,35.646-109.635c9.312,33.333,33.708,76.906,81.479,76.906    c5.896,0,10.667-4.771,10.667-10.667c0-35.698,0.802-76.948,10.344-114.719c10.833-42.792,40.51-89,76.333-120.281    c5.948,45.688,30.833,79.188,56.99,114.385c31.094,41.854,63.24,85.135,68.625,155.219l0.365,5.104    c0.333,4.438,0.677,8.865,0.677,13.625C426.676,390.185,384.085,450.553,323.421,476.748z"></path></svg>
								<svg class="unselectable" id="fullFlameModal" onclick="toggleFlameModal()" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" version="1.1" x="0px" y="0px" viewBox="0 0 512.019 512.019" style="display: none;height: 19px;cursor: pointer;margin-right: 5px;margin-top: 7px;" xml:space="preserve"><path fill="#02acf6" xmlns="http://www.w3.org/2000/svg" d="M446.906,299.769c-5.865-76.359-41.417-124.21-72.781-166.436C345.083,94.241,320,60.483,320,10.685    c0-4-2.24-7.656-5.792-9.489c-3.563-1.844-7.844-1.542-11.083,0.812c-47.104,33.706-86.406,90.515-100.135,144.719    c-9.531,37.737-10.792,80.161-10.969,108.18c-43.5-9.291-53.354-74.359-53.458-75.068c-0.49-3.375-2.552-6.312-5.552-7.916    c-3.031-1.583-6.594-1.698-9.667-0.177c-2.281,1.104-55.99,28.394-59.115,137.355C64.01,312.726,64,316.362,64,319.997    c0,105.857,86.135,191.987,192,191.987c0.146,0.01,0.302,0.031,0.427,0c0.042,0,0.083,0,0.135,0    C362.167,511.681,448,425.667,448,319.997C448,314.674,446.906,299.769,446.906,299.769z M256,490.652    c-35.292,0-64-30.581-64-68.172c0-1.281-0.01-2.573,0.083-4.156c0.427-15.853,3.438-26.675,6.74-33.873    c6.188,13.291,17.25,25.509,35.219,25.509c5.896,0,10.667-4.771,10.667-10.666c0-15.186,0.313-32.706,4.094-48.518    c3.365-14.02,11.406-28.936,21.594-40.893c4.531,15.52,13.365,28.081,21.99,40.341c12.344,17.54,25.104,35.675,27.344,66.6    c0.135,1.833,0.271,3.677,0.271,5.656C320,460.07,291.292,490.652,256,490.652z"/></svg>
							</div>
							<button type="button" class="close" data-dismiss="modal" aria-label="Close" style="float: left; margin-top: 8px;">
								<span aria-hidden="true">×</span>
							</button>
						</div>
						<form id="submitApplicant">
							<div class="modal-body">
								<!-- Job Description -->
								<div class="form-group marginform">
									<label for="recipient-name" class="col-form-label">מספר משרה:</label>
									<textarea class="form-control" id="jobID" name="jobID" type="text" readonly=readonly></textarea>
								</div>
								<div class="form-group marginform">
									<label for="recipient-name" class="col-form-label">שם המשרה:</label>
									<textarea class="form-control" id="jobTitle" name="jobTitle" type="text" readonly=readonly></textarea>
								</div>
								<div id="mailForm" class="form-group marginform">
									<label for="recipient-name" class="col-form-label">מיקום המשרה:</label>
									<textarea class="form-control" id="jobLocations" name="jobLocations" type="text" readonly=readonly></textarea>
								</div>
								<div class="form-group marginform">
									<label for="recipient-name" class="col-form-label">עמלת השמה:</label>
									<textarea class="form-control" id="jobCommission" name="jobCommission" type="text" readonly=readonly></textarea>
								</div>
								<div class="form-group marginform">
									<label for="recipient-name" class="col-form-label">תקופת אחריות:</label>
									<textarea class="form-control" id="jobPeriod" name="jobPeriod" type="text" readonly=readonly></textarea>
								</div>
								<div class="form-group marginform">
									<label for="recipient-name" class="col-form-label">היקף המשרה:</label>
									<textarea class="form-control" id="jobType" name="jobType" type="text" readonly=readonly></textarea>
								</div>
								<div class="form-group marginform">
									<label for="recipient-name" class="col-form-label">קטגוריות:</label>
									<textarea class="form-control" id="jobCategories" name="jobCategories" type="text" readonly=readonly></textarea>
								</div>
								<div class="form-group marginform">
									<label for="recipient-name" class="col-form-label">תיאור המשרה:</label>
									<svg onclick="copyJobDescription('jobDescription')" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" style="float: left;cursor: pointer;"><path d="M13 17h4v1h-4v-1zm0-1h4v-1h-4v1zm9-14v22h-20v-22h3c1.23 0 2.181-1.084 3-2h8c.82.916 1.771 2 3 2h3zm-11 1c0 .552.448 1 1 1 .553 0 1-.448 1-1s-.447-1-1-1c-.552 0-1 .448-1 1zm9 1h-4l-2 2h-3.897l-2.103-2h-4v18h16v-18zm-7 9h4v-1h-4v1zm0-2h4v-1h-4v1zm-6.5.077l.386-.355c.449.218.735.383 1.241.745.952-1.081 1.58-1.627 2.748-2.355l.125.288c-.963.841-1.669 1.777-2.686 3.6-.626-.738-1.044-1.208-1.814-1.923zm.098 5l.386-.355c.449.218.735.383 1.241.745.952-1.081 1.58-1.627 2.748-2.355l.125.289c-.963.841-1.669 1.777-2.686 3.6-.627-.739-1.045-1.209-1.814-1.924z"></path></svg>
									<textarea class="form-control" id="jobDescription" name="jobDescription" type="text" readonly=readonly></textarea>
								</div>
								<div class="form-group marginform">
									<label for="recipient-name" class="col-form-label">מידע לסוכנים:</label>
									<textarea class="form-control" id="jobAgentDescription" name="jobAgentDescription" type="text" readonly=readonly></textarea>
								</div>
								<div class="form-group marginform">
									<label for="recipient-name" class="col-form-label">תיאור החברה:</label>
									<textarea class="form-control" id="jobCompanyDescription" name="jobCompanyDescription" type="text"
									readonly=readonly></textarea>
								</div>
								<!-- Applicant Details -->
								<div class="form-group marginform">
									<label for="recipient-name" class="col-form-label">שם המועמד(שדה חובה):</label>
									<input class="form-control" id="applicantName" name="applicantName" type="text" />
								</div>
								<div class="form-group marginform">
									<label for="recipient-name" class="col-form-label">דואר אלקטרוני של המועמד(שדה חובה):</label>
									<input class="form-control" id="applicantMail" name="applicantMail" type="text" />
								</div>
								<div class="form-group marginform">
									<label for="recipient-name" class="col-form-label">נייד המועמד(שדה חובה):</label>
									<input class="form-control" id="applicantPhone" name="applicantPhone" type="text" />
								</div>
								<div class="form-group marginform">
									<label for="recipient-name" class="col-form-label">כתובת המועמד(שדה חובה):</label>
									<input class="form-control" id="applicantAddress" name="applicantAddress" type="text" />
								</div>
								<label for="recipient-name" class="col-form-label">שאלות סינון(חובה):</label>
								<div id="applicantQuestions">
									
								</div>
								<div class="form-group marginform">
									<label for="recipient-name" class="col-form-label">תקציר המועמד:</label>
									<textarea class="form-control" id="applicantDescription" name="applicantDescription" type="text"></textarea>
								</div>
								<div class="field_wrap field_file field_file_file"><input class="field" type="file"
										id="applicantResume" name="file[0]" data-validate="true"
										autocomplete="off" default_value="" mandatory="1" allowed_size="5000000"
										allowed_ext="pdf,doc,docx,jpg,jpeg,png" data-upload="" style="
									cursor: pointer;
									position: relative;
									opacity: 0;
									width: 100%;
									height: 0;
								">
									<div id="applicantResumeLabel" onclick="$('#applicantResume').click()" class="u_button" style="
									overflow: hidden;
									float: none;
									margin: auto;
									width: 100%;
									display: block;
									box-sizing: border-box;
									opacity: 0.9;
									text-align: center;
									background: #fff;
									border: #7EE7E8 1px solid;
									border-radius: 5px;
									padding: 10px;
									color: #02acf6;
									font-size: 15px;
									cursor: pointer;
								">העלה קורות חיים(חובה) +</div>
									<div class="allowed_file_ext"><span>סיומות אפשריות: pdf ,doc ,docx ,jpg ,jpeg ,png.</span></div>
								</div>
							</div>
							<div class="modal-footer">
								<button type="button" name="close" class="btn btn-secondary" data-dismiss="modal"
									style="float: left;">סגור</button>
								<button id="submit" name="submit" type="submit" class="btn btn-primary"
									style="float: left;">בצע</button>
							</div>
						</form>
					</div>
				</div>
			</div>
		</div>

		<!-- Modal Applicant -->
		<div class="modal" id="myModalApplicant" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
			<div class="vertical-alignment-helper">
				<div class="modal-dialog vertical-align-center" role="document">
					<div class="modal-content">
						<div class="modal-header">
							<button type="button" class="close" data-dismiss="modal" aria-label="Close"
								style="float: left;">
								<span aria-hidden="true">×</span>
							</button>
						</div>
						<!-- Applicant Status -->
						<form id="showApplicantStatus">
							<div class="modal-body">
								<!-- Job Description -->
								<div style="display: none;" class="form-group marginform">
									<label for="recipient-name" class="col-form-label">מזהה המסמך:</label>
									<input class="form-control" id="applicant_docID" type="text" readonly=readonly />
								</div>
								<div class="form-group marginform">
									<label for="recipient-name" class="col-form-label">סטטוס המועמד:</label>
									<input class="form-control" id="applicant_applicantStatus" name="Status" type="text" readonly=readonly/>
								</div>
								<div class="form-group marginform">
									<label for="recipient-name" class="col-form-label">הערת מנהל/ת:</label>
									<textarea class="form-control" id="applicant_ManagerComment" name="ManagerComment" type="text" readonly=readonly></textarea>
								</div>
								<div style="display: none;" class="form-group marginform">
									<label for="recipient-name" class="col-form-label">שם הסוכן:</label>
									<input class="form-control" id="applicant_agentName" type="text" readonly=readonly />
								</div>
								<div style="display: none;" class="form-group marginform">
									<label for="recipient-name" class="col-form-label">מזהה הסוכן:</label>
									<input class="form-control" id="applicant_agentUID" type="text" readonly=readonly />
								</div>
								<div class="form-group marginform">
									<label for="recipient-name" class="col-form-label">תאריך העלאת המועמד:</label>
									<input style="direction: ltr; text-align: right;" class="form-control" id="applicant_Date" name="applicantDate" type="text" readonly=readonly />
								</div>
								<div class="form-group marginform">
									<label for="recipient-name" class="col-form-label">מספר משרה:</label>
									<textarea class="form-control" id="applicant_jobID" name="jobID" type="text" readonly=readonly></textarea>
								</div>
								<div class="form-group marginform">
									<label for="recipient-name" class="col-form-label">שם המשרה:</label>
									<textarea class="form-control" id="applicant_jobTitle" name="jobTitle" type="text" readonly=readonly></textarea>
								</div>
								<div id="applicant_mailForm" class="form-group marginform">
									<label for="recipient-name" class="col-form-label">מיקום המשרה:</label>
									<textarea class="form-control" id="applicant_jobLocations" name="jobLocations" type="text" readonly=readonly></textarea>
								</div>
								<div class="form-group marginform">
									<label for="recipient-name" class="col-form-label">עמלת השמה:</label>
									<textarea class="form-control" id="applicant_jobCommission" name="jobCommission" type="text" readonly=readonly></textarea>
								</div>
								<div class="form-group marginform">
									<label for="recipient-name" class="col-form-label">תקופת אחריות:</label>
									<textarea class="form-control" id="applicant_jobPeriod" name="jobPeriod" type="text" readonly=readonly></textarea>
								</div>
								<div class="form-group marginform">
									<label for="recipient-name" class="col-form-label">היקף המשרה:</label>
									<textarea class="form-control" id="applicant_jobType" name="jobType" type="text" readonly=readonly></textarea>
								</div>
								<div class="form-group marginform">
									<label for="recipient-name" class="col-form-label">קטגוריות:</label>
									<textarea class="form-control" id="applicant_jobCategories" name="jobCategories" type="text" readonly=readonly></textarea>
								</div>
								<div class="form-group marginform">
									<label for="recipient-name" class="col-form-label">תיאור המשרה:</label>
									<svg onclick="copyJobDescription('applicant_jobDescription')" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" style="float: left;cursor: pointer;"><path d="M13 17h4v1h-4v-1zm0-1h4v-1h-4v1zm9-14v22h-20v-22h3c1.23 0 2.181-1.084 3-2h8c.82.916 1.771 2 3 2h3zm-11 1c0 .552.448 1 1 1 .553 0 1-.448 1-1s-.447-1-1-1c-.552 0-1 .448-1 1zm9 1h-4l-2 2h-3.897l-2.103-2h-4v18h16v-18zm-7 9h4v-1h-4v1zm0-2h4v-1h-4v1zm-6.5.077l.386-.355c.449.218.735.383 1.241.745.952-1.081 1.58-1.627 2.748-2.355l.125.288c-.963.841-1.669 1.777-2.686 3.6-.626-.738-1.044-1.208-1.814-1.923zm.098 5l.386-.355c.449.218.735.383 1.241.745.952-1.081 1.58-1.627 2.748-2.355l.125.289c-.963.841-1.669 1.777-2.686 3.6-.627-.739-1.045-1.209-1.814-1.924z"></path></svg>
									<textarea class="form-control" id="applicant_jobDescription" name="jobDescription" type="text" readonly=readonly></textarea>
								</div>
								<div class="form-group marginform">
									<label for="recipient-name" class="col-form-label">מידע לסוכנים:</label>
									<textarea class="form-control" id="applicant_jobAgentDescription" name="jobAgentDescription" type="text" readonly=readonly></textarea>
								</div>
								<div class="form-group marginform">
									<label for="recipient-name" class="col-form-label">תיאור החברה:</label>
									<textarea class="form-control" id="applicant_jobCompanyDescription" name="jobCompanyDescription" type="text"
									readonly=readonly></textarea>
								</div>
								<!-- Applicant Details -->
								<div class="form-group marginform">
									<label for="recipient-name" class="col-form-label">שם המעומד:</label>
									<input class="form-control" id="applicant_applicantName" name="applicantName" type="text" readonly=readonly />
								</div>
								<div class="form-group marginform">
									<label for="recipient-name" class="col-form-label">דואר אלקטרוני של המועמד:</label>
									<input class="form-control" id="applicant_applicantMail" name="applicantMail" type="text" readonly=readonly />
								</div>
								<div class="form-group marginform">
									<label for="recipient-name" class="col-form-label">נייד המועמד:</label>
									<input class="form-control" id="applicant_applicantPhone" name="applicantPhone" type="text" readonly=readonly />
								</div>
								<div class="form-group marginform">
									<label for="recipient-name" class="col-form-label">כתובת המועמד:</label>
									<input class="form-control" id="applicant_applicantAddress" name="applicantAddress" type="text" readonly=readonly />
								</div>
								<label for="recipient-name" class="col-form-label">שאלות סינון(חובה):</label>
								<div id="applicant_applicantQuestions">
									
								</div>
								<div class="form-group marginform">
									<label for="recipient-name" class="col-form-label">תקציר המועמד:</label>
									<textarea class="form-control" id="applicant_applicantDescription" name="applicantDescription" type="text" readonly=readonly></textarea>
								</div>
								<div class="field_wrap field_file field_file_file">
								<a target="_blank" id="applicant_downloadResumeLabel" class="u_button" style="
								font-family: 'Source Sans Pro', sans-serif;
								overflow: hidden;
								float: none;
								margin: auto;
								width: 100%;
								display: block;
								box-sizing: border-box;
								opacity: 0.9;
								text-align: center;
								background: #fff;
								border: #7EE7E8 1px solid;
								border-radius: 5px;
								padding: 10px;
								color: #02acf6;
								font-size: 15px;
								cursor: pointer;
							">הורד קורות חיים</a>
									<div class="allowed_file_ext"><span>סיומות אפשריות: pdf ,doc ,docx ,jpg ,jpeg ,png.</span></div>
								</div>
							</div>
							<div class="modal-footer">
								<button type="button" name="close" class="btn btn-secondary" data-dismiss="modal"
									style="float: left;">סגור</button>
								<button id="updateApplicantStatus" name="submit" type="submit" class="btn btn-primary"
									style="display: none;float: left;">בצע</button>
							</div>
						</form>
					</div>
				</div>
			</div>
		</div>

		<!-- Modal User -->
		<div class="modal" id="myModalUser" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
			<div class="vertical-alignment-helper">
				<div class="modal-dialog vertical-align-center" role="document">
					<div class="modal-content">
						<div class="modal-header">
							<button type="button" class="close" data-dismiss="modal" aria-label="Close"
								style="float: left;">
								<span aria-hidden="true">×</span>
							</button>
						</div>
						<!-- Applicant Status -->
						<form id="showUserStatus">
							<div class="modal-body">
								<!-- Job Description -->
								<div class="form-group marginform">
									<label for="recipient-name" class="col-form-label">מזהה:</label>
									<input class="form-control" id="user_UID" type="text" readonly=readonly />
								</div>
								<div class="form-group marginform">
									<label for="recipient-name" class="col-form-label">שם:</label>
									<input class="form-control" id="user_Name" type="text" readonly=readonly/>
								</div>
								<div class="form-group marginform">
									<label for="recipient-name" class="col-form-label">טלפון:</label>
									<input class="form-control" id="user_Phone" type="text" readonly=readonly/>
								</div>
								<div class="form-group marginform">
									<label for="recipient-name" class="col-form-label">מייל:</label>
									<input class="form-control" id="user_Mail" type="text" readonly=readonly/>
								</div>
								<div class="form-group marginform">
									<label for="recipient-name" class="col-form-label">כתובת:</label>
									<input class="form-control" id="user_Address" type="text" readonly=readonly/>
								</div>
								<div class="form-group marginform">
									<label for="recipient-name" class="col-form-label">סטטוס:</label>
									<svg onclick="clearStatus()" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" style="float: left;cursor: pointer;"><path d="M13 17h4v1h-4v-1zm0-1h4v-1h-4v1zm9-14v22h-20v-22h3c1.23 0 2.181-1.084 3-2h8c.82.916 1.771 2 3 2h3zm-11 1c0 .552.448 1 1 1 .553 0 1-.448 1-1s-.447-1-1-1c-.552 0-1 .448-1 1zm9 1h-4l-2 2h-3.897l-2.103-2h-4v18h16v-18zm-7 9h4v-1h-4v1zm0-2h4v-1h-4v1zm-6.5.077l.386-.355c.449.218.735.383 1.241.745.952-1.081 1.58-1.627 2.748-2.355l.125.288c-.963.841-1.669 1.777-2.686 3.6-.626-.738-1.044-1.208-1.814-1.923zm.098 5l.386-.355c.449.218.735.383 1.241.745.952-1.081 1.58-1.627 2.748-2.355l.125.289c-.963.841-1.669 1.777-2.686 3.6-.627-.739-1.045-1.209-1.814-1.924z"></path></svg>
									<input class="form-control" id="user_Status" name="Status" type="text"/>
								</div>
								<div style="margin-bottom: 15px;" class="field_wrap field_file field_file_file">
									<a target="_blank" id="user_Whatsapp" class="u_button" style="
									font-family: 'Source Sans Pro', sans-serif;
									overflow: hidden;
									float: none;
									margin: auto;
									width: 100%;
									display: block;
									box-sizing: border-box;
									opacity: 0.9;
									text-align: center;
									background: #fff;
									border: #7EE7E8 1px solid;
									border-radius: 5px;
									padding: 10px;
									color: #02acf6;
									font-size: 15px;
									cursor: pointer;
								">שלח הודעה בווטסאפ</a>
								</div>
								<div class="field_wrap field_file field_file_file">
									<a target="_blank" id="user_WhatsappEmpty" class="u_button" style="
									font-family: 'Source Sans Pro', sans-serif;
									overflow: hidden;
									float: none;
									margin: auto;
									width: 100%;
									display: block;
									box-sizing: border-box;
									opacity: 0.9;
									text-align: center;
									background: #fff;
									border: #7EE7E8 1px solid;
									border-radius: 5px;
									padding: 10px;
									color: #02acf6;
									font-size: 15px;
									cursor: pointer;
								">שלח הודעה ריקה בווטסאפ</a>
								</div>
							</div>
							<div class="modal-footer">
								<button type="button" name="close" class="btn btn-secondary" data-dismiss="modal"
									style="float: left;">סגור</button>
								<button id="updateUser" name="submit" type="submit" class="btn btn-primary"
									style="float: left;">בצע</button>
							</div>
						</form>
					</div>
				</div>
			</div>
		</div>
	</div>
	<!-- Javascript -->
	<script src="assets/vendor/jquery/jquery.min.js"></script>
	<script src="assets/vendor/bootstrap/js/bootstrap.min.js"></script>
	<script src="assets/vendor/jquery-slimscroll/jquery.slimscroll.min.js"></script>
	<script src="assets/vendor/jquery.easy-pie-chart/jquery.easypiechart.min.js"></script>
	<script src="assets/vendor/chartist/js/chartist.min.js"></script>
	<script src="assets/scripts/klorofil-common.js"></script>
	<script src="https://cdn.jsdelivr.net/npm/gasparesganga-jquery-loading-overlay@2.1.6/dist/loadingoverlay.min.js"></script>
	<!-- Date Range Picker -->
	<script src="https://cdn.jsdelivr.net/momentjs/latest/moment.min.js"></script>
	<script src="https://cdn.jsdelivr.net/npm/daterangepicker/daterangepicker.min.js"></script>
	<!-- Form Validator -->
	<script type="text/javascript" src="assets/scripts/FormValidator.js?ver=2.4"></script>

	<script src="https://www.gstatic.com/firebasejs/5.7.1/firebase.js"></script>
	<script>
		var firestoreUser = null
		const COMMISSION_RATE = 1 //How much percent goes to the agent(75%)
		// Initialize Firebase
		var config = {
			apiKey: "AIzaSyCSavrZTK9jWXLYmIC3ahYuBFm-FdSPkkc",
			authDomain: "manpower-598c9.firebaseapp.com",
			databaseURL: "https://manpower-598c9.firebaseio.com",
			projectId: "manpower-598c9",
			storageBucket: "manpower-598c9.appspot.com",
			messagingSenderId: "496181078375"
		}
		firebase.initializeApp(config)
		// Initialize Cloud Firestore through Firebase
		var db = firebase.firestore()
		// Disable deprecated features
		db.settings({
			timestampsInSnapshots: true
		})

		$('#login').click(function (e) {
			e.preventDefault()
			firebase.auth().signInWithEmailAndPassword($('#usernameLogin').val(), $('#passwordLogin').val()).catch(function (error) {
				// Handle Errors here.
				var errorCode = error.code
				var errorMessage = error.message
				console.log('CODE: ' + errorCode + '\nERROR: ' + errorMessage)
				alert(errorMessage)
			})
		})

		$('#logout').click(function (e) {
			e.preventDefault()
			firebase.auth().signOut().then(function () {
				// Sign-out successful
			}).catch(function (error) {
				// An error happened
				console.log(error)
				alert(error)
			});
		})

		firebase.auth().onAuthStateChanged(function(user) {
			if (user) {
				firestoreUser = user
				// User is signed in
				if(isAdmin())
					document.querySelector('#usersSideButtonFather').style.display = 'table-cell'
				else {
					document.querySelector('#usersSideButtonFather').style.display = 'none'
					alert('המערכת לא פעילה יותר. לפרטים פנו למנהל הגיוס')
				}
				getTableData()
				$('#loginPage').hide()
				$('#navbarNameTitle').text(user.displayName)
				$('#adminPage').show()
			}
			else {
				// User is not signed in
				$('#adminPage').hide()
				$('#loginPage').show()
			}
		})

		function isAdmin() {
			return (firestoreUser.uid == 'z73QlI3MGCcCwWDjNSgNi3l6OQt2' || firestoreUser.uid == 'pNX7k7TNIUNP5RAH1CBtIhh9dFk1')
		}

		function isActive(lastScanned) {
		    // Check when last scanned, if to old don't show job
			/*if(lastScanned) {
				var israeliDate = getDate(lastScanned.toDate())
				var millisecondsDifference = firebase.firestore.Timestamp.fromDate(new Date()).toDate() - lastScanned.toDate()
				var daysDifference = millisecondsToDays(millisecondsDifference)
				if(daysDifference >= 0 && daysDifference <= 3) { //Up to 2 days time difference until warning
					return true
				}
				else {
					return false
				}
			}*/
			return true
		}
		function millisecondsToDays(t) {
			var cd = 24 * 60 * 60 * 1000
			var	ch = 60 * 60 * 1000
			var	d = Math.floor(t / cd)
			var	h = Math.floor( (t - d * cd) / ch)
			var	m = Math.round( (t - d * cd - h * ch) / 60000)
			var	pad = function(n) { return n < 10 ? '0' + n : n }
			if( m === 60 ) {
				h++
				m = 0
			}
			if( h === 24 ) {
				d++
				h = 0
			}
			//return [d, pad(h), pad(m)].join(':') //return d:h:m
			return d //days
		}
		function add0(param) {
			return (param.toString().length == 1) ? '0' + param.toString() : param.toString()
		}
		function getDayMonthYear(date) {
			return add0(date.getDate()) + '.' + add0(date.getMonth() + 1) + '.' + add0(date.getFullYear())
		}
		function getDate(date) {
			return getDayMonthYear(date) + ' ' + add0(date.getHours()) + ':' + add0(date.getMinutes()) + ':' + add0(date.getSeconds())
		}

		function containsSVT(array) {
			for (let i = 0; i < array.length; i++) {
				if(array[i] && (array[i].toUpperCase().includes('SVT') || array[i].toUpperCase().includes('SEEVEET') || array[i].includes('סיביט'))) {
					return true
				}
			}
			return false
		}

		function isFavorite(doc) {
			return (doc.data().UID && doc.data().UID.includes(firestoreUser.uid))
		}

		function isHot(doc) {
			return doc.data().Hot
		}

		function toggleStar() {
			if($('#star').text() == "☆") {
				$('#star').text("★")
			}
			else {
				$('#star').text("☆")
			}
			search()
		}

		function toggleFilter() {
			if(document.getElementById('filter').style.display == 'none') {
				document.getElementById('noFilter').style.display = 'none'
				document.getElementById('filter').style.display = ''
				$('#search').show()
				search()
			}
			else {
				document.getElementById('filter').style.display = 'none'
				document.getElementById('noFilter').style.display = ''
				$('#search').hide()
				search()
			}
		}

		function toggleFlame() {
			if(document.getElementById('fullFlame').style.display == 'none') {
				document.getElementById('emptyFlame').style.display = 'none'
				document.getElementById('fullFlame').style.display = ''
				search()
			}
			else {
				document.getElementById('fullFlame').style.display = 'none'
				document.getElementById('emptyFlame').style.display = ''
				search()
			}
		}

		function toggleFlameModal() {
			if(isAdmin()) {
				var isHot = document.getElementById('fullFlameModal').style.display == 'none'
				db.collection("Jobs").doc($('#jobID').val()).set({
					Hot: isHot
				}, {merge: true})
				.then(function () {
					console.log("Document successfully written!")
				})
				.catch(function (error) {
					console.log("Error updating hot favorite job to Firestore: ", error)
					alert("Error updating hot job to Firestore: ", error)
				})
			}
		}

		function activate(type) {
			switch(type) {
				case 'Jobs':
					$('#jobsSideButton').css('text-decoration', 'underline')
					$('#applicantsSideButton').css('text-decoration', 'none')
					$('#usersSideButton').css('text-decoration', 'none')
					$('#formsSideButton').css('text-decoration', 'none')
					$('#applicantsPanel').hide()
					$('#usersPanel').hide()
					$('#formsPanel').hide()
					$('#jobsPanel').show()
					break
				case 'Applicants':
					$('#applicantsSideButton').css('text-decoration', 'underline')
					$('#jobsSideButton').css('text-decoration', 'none')
					$('#usersSideButton').css('text-decoration', 'none')
					$('#formsSideButton').css('text-decoration', 'none')
					$('#jobsPanel').hide()
					$('#formsPanel').hide()
					$('#usersPanel').hide()
					$('#applicantsPanel').show()
					break
				case 'Users':
					$('#usersSideButton').css('text-decoration', 'underline')
					$('#applicantsSideButton').css('text-decoration', 'none')
					$('#jobsSideButton').css('text-decoration', 'none')
					$('#formsSideButton').css('text-decoration', 'none')
					$('#jobsPanel').hide()
					$('#formsPanel').hide()
					$('#applicantsPanel').hide()
					$('#usersPanel').show()
					break
				case 'Forms':
					$('#formsSideButton').css('text-decoration', 'underline')
					$('#applicantsSideButton').css('text-decoration', 'none')
					$('#jobsSideButton').css('text-decoration', 'none')
					$('#usersSideButton').css('text-decoration', 'none')
					$('#formsPanel').show()
					$('#jobsPanel').hide()
					$('#applicantsPanel').hide()
					$('#usersPanel').hide()
					break
			}
		}

		function search() {
			// Show all rows
			$('tr.tablerow').show()

			// Favorite filter
			if($('#star').text() == "★") {
				$('.isNotFavorite').hide()
			}

			// Hot filter
			if(document.getElementById('fullFlame').style.display != 'none') {
				$('.isNotHot').hide()
			}

			// Free search and Category filter and Area filter
			if(document.getElementById('search').style.display != 'none') {
				var input, filter, table, tr, td, i
				var overall = 0, errors = 0, warnings = 0, completed = 0
				var category = document.getElementById('categorySearch').value.toUpperCase()
				var area = document.getElementById('areaSearch').value.toUpperCase()
				input = document.getElementById("freeSearch")
				filter = input.value.toUpperCase()
				table = document.getElementById("tbodyJobs")
				tr = table.getElementsByTagName("tr")
				// Loop through all table rows, and hide those who don't match the search query
				for (i = 0; i < tr.length; i++) {
					var filterSearch = false
					var filterCategory = false
					var filterArea = false
					//Filter search
					cells = tr[i].getElementsByClassName("search")
					for (j = 0; j < cells.length; j++) {
						if (cells[j].innerHTML.toUpperCase().indexOf(filter) > -1) {
							filterSearch = true
							break
						}
					}
					//Category search
					cells = tr[i].getElementsByClassName("searchCategory")
					for (j = 0; j < cells.length; j++) {
						if (cells[j].innerHTML.toUpperCase().indexOf(category) > -1) {
							filterCategory = true
							break
						}
					}
					//Area search
					cells = tr[i].getElementsByClassName("searchArea")
					for (j = 0; j < cells.length; j++) {
						if (cells[j].innerHTML.toUpperCase().indexOf(area) > -1) {
							filterArea = true
							break
						}
					}
					if (filterSearch == false || filterCategory == false || filterArea == false) {
						tr[i].style.display = "none"
					} 
				}
			}

			// Zebra rows
			var table = document.getElementById("tbodyJobs")
			var tr = table.getElementsByTagName("tr")
			var counter = 0
			for (i = 0; i < tr.length; i++) {
				if(tr[i].style.display != "none") {
					counter++
					tr[i].style.backgroundColor = (counter%2 == 1) ? '#f9f9f9' : '#fff'
				}
			}

			document.getElementById('titleActiveJobs').innerText = counter + ' משרות'
		}

		function getTableData() {
			//Update Jobs Table
			db.collection("Jobs").orderBy('Locations', 'asc').onSnapshot({ includeMetadataChanges: true }, function (querySnapshot) {
				//Check if change has happened on the backend
				if (querySnapshot.metadata.fromCache == false && querySnapshot.metadata.hasPendingWrites == false) {
					var content = ''
					querySnapshot.forEach(function (doc) {
						if(isActive(doc.data().LastScanned) && !containsSVT([doc.data().Description, doc.data().AgentDescription, doc.data().CompanyDescription])) {
							// doc.data() is never undefined for query doc snapshots
							content += '<tr class="tablerow ' + (isFavorite(doc) ? 'isFavorite ' : 'isNotFavorite ') + (isHot(doc) ? 'isHot' : 'isNotHot') + '" id="' + doc.id + '">'
							content += '<td class="resolutionDisplay" onclick="showJob(' + "'" + doc.id + "'" + ')" style="white-space: nowrap" id="jobPeriod' + doc.id + '">' + doc.data().Period + '</td>'
							content += '<td onclick="showJob(' + "'" + doc.id + "'" + ')" style="white-space: nowrap" id="jobCommission' + doc.id + '">' + commissionRate(doc.data().Commission) + '</td>'
							content += '<td class="search resolutionDisplay" onclick="showJob(' + "'" + doc.id + "'" + ')" id="jobLocations' + doc.id + '">' + doc.data().Locations.toString().replace(/,/g, ', ') + '</td>'
							content += '<td class="search" onclick="showJob(' + "'" + doc.id + "'" + ')" style="font-weight: bold;" id="jobTitle' + doc.id + '">' + doc.data().Title + '</td>'
							content += '<td class="search" onclick="showJob(' + "'" + doc.id + "'" + ')" style="text-align: left;width:1%;white-space:nowrap;" id="jobID' + doc.id + '">' + doc.data().ID + '</td>'
							content += '<td class="favoriteJob resolutionDisplay" onclick=' + "'updateFavoriteJobs(" + '"' + doc.id.toString() + '"' + "," + JSON.stringify((doc.data().UID ? doc.data().UID : [])) + ")'" + ' id="favoriteJob' + doc.id + '" style="padding: 0;padding-bottom: 0;"><span style="font-size: 26px;color: #00aaff;">' + (isFavorite(doc) ? '&bigstar;' : '&star;') + '</span></td>'
							content += '<td class="search" onclick="showJob(' + "'" + doc.id + "'" + ')" style="display: none" id="jobType' + doc.id + '">' + doc.data().JobType + '</td>'
							content += '<td class="search searchCategory" onclick="showJob(' + "'" + doc.id + "'" + ')" style="display: none" id="jobCategories' + doc.id + '">' + doc.data().Categories + '</td>'
							content += '<td class="search searchArea" onclick="showJob(' + "'" + doc.id + "'" + ')" style="display: none" id="jobAreas' + doc.id + '">' + doc.data().Areas + '</td>'
							content += '<td class="search" onclick="showJob(' + "'" + doc.id + "'" + ')" style="display: none" id="jobDescription' + doc.id + '">' + doc.data().Description + '</td>'
							content += '<td class="search" onclick="showJob(' + "'" + doc.id + "'" + ')" style="display: none" id="jobAgentDescription' + doc.id + '">' + doc.data().AgentDescription + '</td>'
							content += '<td class="search" onclick="showJob(' + "'" + doc.id + "'" + ')" style="display: none" id="jobCompanyDescription' + doc.id + '">' + doc.data().CompanyDescription + '</td>'
							for(var i = 0; i < doc.data().Questions.length; i++) {
								content += '<td class="search" onclick="showJob(' + "'" + doc.id + "'" + ')" style="display: none" id="jobQuestions' + i + doc.id + '">' + doc.data().Questions[i] + '</td>'
							}
							content += '</tr>'
						}
					})
					$('#tbodyJobs').html(content)
					updateModalStar() //Update modal star if modal is open
					updateModalFlame() //Update modal flame if modal is open
					search()
				}
			})
			//Update Applicants Table
			var reference = isAdmin() ? db.collection("Applicants") : db.collection("Applicants").where('UID', '==', firestoreUser.uid)
			reference.orderBy("Date", "desc").onSnapshot({ includeMetadataChanges: true }, function (querySnapshot) {
				//Check if change has happened on the backend
				if (querySnapshot.metadata.fromCache == false && querySnapshot.metadata.hasPendingWrites == false) {
					var content = ''
					querySnapshot.forEach(function (doc) {
						if(isActive(doc.data().LastScanned) && !containsSVT([doc.data().Description, doc.data().AgentDescription, doc.data().CompanyDescription])) {
							// doc.data() is never undefined for query doc snapshots
							content += '<tr onclick="showApplicant(' + "'" + doc.id + "'" + ')" class="tablerow ' + (isFavorite(doc) ? 'isFavorite' : 'isNotFavorite') + '" id="' + doc.id + '">'
							content += '<td id="applicant_applicantStatus' + doc.id + '">' + doc.data().Status + '</td>'
							content += '<td class="resolutionDisplay" style="white-space: nowrap" id="applicant_jobPeriod' + doc.id + '">' + doc.data().jobPeriod + '</td>'
							content += '<td class="resolutionDisplay" style="white-space: nowrap" id="applicant_jobCommission' + doc.id + '">' + commissionRate(doc.data().jobCommission) + '</td>'
							content += '<td style="display: none" class="resolutionDisplay" id="applicant_jobLocations' + doc.id + '">' + doc.data().jobLocations.toString().replace(/,/g, ', ') + '</td>'
							content += '<td id="applicant_applicantName' + doc.id + '">' + doc.data().applicantName + '</td>'
							content += '<td style="font-weight: bold;" id="applicant_jobTitle' + doc.id + '">' + doc.data().jobTitle + '</td>'
							content += '<td class="resolutionDisplay" style="text-align: left;width:1%;white-space:nowrap;" id="applicant_jobID' + doc.id + '">' + doc.data().jobID + '</td>'
							content += '<td style="display: none" id="applicant_jobType' + doc.id + '">' + doc.data().jobType + '</td>'
							content += '<td style="display: none" id="applicant_jobCategories' + doc.id + '">' + doc.data().jobCategories + '</td>'
							content += '<td style="display: none" id="applicant_jobDescription' + doc.id + '">' + doc.data().jobDescription + '</td>'
							content += '<td style="display: none" id="applicant_jobAgentDescription' + doc.id + '">' + doc.data().jobAgentDescription + '</td>'
							content += '<td style="display: none" id="applicant_jobCompanyDescription' + doc.id + '">' + doc.data().jobCompanyDescription + '</td>'
							content += '<td style="display: none" id="applicant_applicantMail' + doc.id + '">' + doc.data().applicantMail + '</td>'
							content += '<td style="display: none" id="applicant_applicantPhone' + doc.id + '">' + doc.data().applicantPhone + '</td>'
							content += '<td style="display: none" id="applicant_applicantAddress' + doc.id + '">' + doc.data().applicantAddress + '</td>'
							content += '<td style="display: none" id="applicant_applicantDescription' + doc.id + '">' + doc.data().applicantDescription + '</td>'
							content += '<td style="display: none" id="applicant_applicantResume' + doc.id + '">' + doc.data().Resume + '</td>'
							content += '<td style="display: none" id="applicant_ManagerComment' + doc.id + '">' + doc.data().ManagerComment + '</td>'
							content += '<td style="display: none" id="applicant_agentName' + doc.id + '">' + doc.data().AgentName + '</td>'
							content += '<td style="display: none" id="applicant_agentUID' + doc.id + '">' + doc.data().UID + '</td>'
							content += '<td style="display: none" id="applicant_Date' + doc.id + '">' + getDate(doc.data().Date.toDate()) + '</td>'
							for(var i = 0; i < doc.data().Questions.length; i++) {
								content += '<td style="display: none" id="applicant_jobQuestions' + i + doc.id + '">' + doc.data().Questions[i]['Question'] + '</td>'
								content += '<td style="display: none" id="applicant_jobAnswers' + i + doc.id + '">' + doc.data().Questions[i]['Answer'] + '</td>'
							}
							content += '</tr>'
						}
					})
					$('#tbodyApplicants').html(content)
				}
			})
			//Update Users Table
			db.collection("Users").orderBy('DateCreated', 'desc').onSnapshot({ includeMetadataChanges: true }, function (querySnapshot) {
				//Check if change has happened on the backend
				if (querySnapshot.metadata.fromCache == false && querySnapshot.metadata.hasPendingWrites == false) {
					var content = ''
					querySnapshot.forEach(function (doc) {
						// doc.data() is never undefined for query doc snapshots
						content += '<tr class="tablerow" id="' + doc.id + '">'
						content += '<td onclick="showUser(' + "'" + doc.id + "'" + ')" style="font-weight: bold;" id="userStatus' + doc.id + '">' + doc.data().Status + '</td>'
						content += '<td onclick="showUser(' + "'" + doc.id + "'" + ')" id="userName' + doc.id + '">' + doc.data().Name + '</td>'
						content += '<td onclick="showUser(' + "'" + doc.id + "'" + ')" style="text-align: left;width:1%;white-space:nowrap;" id="userID' + doc.id + '">' + doc.id + '</td>'
						// hidden columns
						content += '<td onclick="showUser(' + "'" + doc.id + "'" + ')" style="display: none;" id="userPhone' + doc.id + '">' + doc.data().Phone + '</td>'
						content += '<td onclick="showUser(' + "'" + doc.id + "'" + ')" style="display: none;" id="userMail' + doc.id + '">' + doc.data().Mail + '</td>'
						content += '<td onclick="showUser(' + "'" + doc.id + "'" + ')" style="display: none;" id="userAddress' + doc.id + '">' + doc.data().Address + '</td>'
						content += '</tr>'
					})
					$('#tbodyUsers').html(content)
				}
			})
		}

		function updateModalStar() {
			if(document.getElementById('myModal').style.display != 'none') {
				$('#modalStar').text($("[id='favoriteJob" + $('#jobID').val() + "']").text())
			}
		}

		function updateModalFlame() {
			if(document.getElementById('myModal').style.display != 'none') {
				if($("tr[id='" + $('#jobID').val() + "']").hasClass('isHot')) {
					$("#fullFlameModal").show()
					$("#emptyFlameModal").hide()
				}
				else {
					$("#fullFlameModal").hide()
					$("#emptyFlameModal").show()
				}
			}
		}

		function modalStarClick() {
			$("[id='favoriteJob" + $('#jobID').val() + "']").click()
		}

		function clearStatus() {
			$('#user_Status').val('')
		}

		function copyJobDescription(identifier) {
			var copyText = document.getElementById(identifier)
			// handle iOS as a special case
			if (navigator.userAgent.match(/ipad|ipod|iphone/i)) {
				var el = document.getElementById(identifier)

				// save current contentEditable/readOnly status
				var editable = el.contentEditable;
				var readOnly = el.readOnly;

				// convert to editable with readonly to stop iOS keyboard opening
				el.contentEditable = true;
				el.readOnly = true;

				// create a selectable range
				var range = document.createRange();
				range.selectNodeContents(el);

				// select the range
				var selection = window.getSelection();
				selection.removeAllRanges();
				selection.addRange(range);
				el.setSelectionRange(0, 999999);

				// restore contentEditable/readOnly to original state
				el.contentEditable = editable;
				el.readOnly = readOnly;
			}
			else { //If not iphone/ipad/ipod
				copyText.select()
			}
			document.execCommand("copy")
			//Deselect text
			if (window.getSelection) {
				window.getSelection().removeAllRanges()
			}
 			else if (document.selection) {
				document.selection.empty()
			}
			$.LoadingOverlay("show", {
				image       : "",
				text        : "הועתק תוכן המשרה",
				textColor   : "#EEEEEE",
				background  : "rgba(0, 0, 0, 0.8)",
				textResizeFactor    : "0.2"
			})
			setTimeout(function(){
				$.LoadingOverlay("hide")
			}, 2000)
		}

		//returns COMMISSION_RATE% of the original commission with shekel format 
		function commissionRate(commission, useRate = true) {
			return Math.round(commission * (useRate ? COMMISSION_RATE : 1)).toString().replace(/(\d)(?=(\d\d\d)+(?!\d))/g, "$1,") + ' ₪'
		}

		function updateFavoriteJobs(id, uids) {
			newUIDs = []
			if(uids.includes(firestoreUser.uid) == false) {
				newUIDs.push(firestoreUser.uid)
			}
			for (let i = 0; i < uids.length; i++) {
				if(uids[i] != firestoreUser.uid) {
					newUIDs.push(uids[i])
				}
			}
			db.collection("Jobs").doc(id.toString()).set({
				UID: newUIDs
			}, {merge: true})
			.then(function () {
				console.log("Document successfully written!")
			})
			.catch(function (error) {
				console.log("Error writing favorite job to Firestore: ", error)
				alert("Error writing favorite job to Firestore: ", error)
			})
		}

		function showJob(id) {
			$("#jobID").val($("[id='jobID" + id + "']").text())
			$("#jobTitle").val($("[id='jobTitle" + id + "']").text())
			$("#jobLocations").val($("[id='jobLocations" + id + "']").text())
			$("#jobCommission").val($("[id='jobCommission" + id + "']").text())
			$("#jobPeriod").val($("[id='jobPeriod" + id + "']").text())
			$("#jobType").val($("[id='jobType" + id + "']").text())
			$("#jobCategories").val($("[id='jobCategories" + id + "']").text())
			$("#jobDescription").val($("[id='jobDescription" + id + "']").text())
			$("#jobAgentDescription").val($("[id='jobAgentDescription" + id + "']").text())
			$("#jobCompanyDescription").val($("[id='jobCompanyDescription" + id + "']").text())

			var content = ''
			for(var i = 0; $("#jobQuestions" + i + id).length > 0; i++) {
				name = $("#jobQuestions" + i + id).text().replace(/"/g, "''")
				content += '<div class="form-group marginform"><label for="recipient-name" class="col-form-label">' + $("#jobQuestions" + i + id).text() + '</label><input class="form-control" class="applicantQuestion" id="applicantQuestion' + i + '" name="jobQuestions' + i + id + '" type="text" /></div>'
			}
			$("#applicantQuestions").html(content)
	
			$("#applicantName").val('')
			$("#applicantMail").val('')
			$("#applicantPhone").val('')
			$("#applicantAddress").val('')
			$("#applicantDescription").val('')
			document.getElementById('applicantResume').value = ""
			$("#applicantResumeLabel").text('העלה קורות חיים(חובה) +')

			$('#modalStar').text($("[id='favoriteJob" + id + "']").text())
			if($("tr[id='" + id + "']").hasClass('isHot')) {
				$("#fullFlameModal").show()
				$("#emptyFlameModal").hide()
			}
			else {
				$("#fullFlameModal").hide()
				$("#emptyFlameModal").show()
			}
			
			$('#myModal').modal('show')
			$('textarea').trigger('input')
		}

		function showApplicant(id) {
			$("#applicant_docID").val(id)
			$("#applicant_agentName").val($("[id='applicant_agentName" + id + "']").text())
			$("#applicant_agentUID").val($("[id='applicant_agentUID" + id + "']").text())
			$("#applicant_jobID").val($("[id='applicant_jobID" + id + "']").text())
			$("#applicant_jobTitle").val($("[id='applicant_jobTitle" + id + "']").text())
			$("#applicant_jobLocations").val($("[id='applicant_jobLocations" + id + "']").text())
			$("#applicant_jobCommission").val($("[id='applicant_jobCommission" + id + "']").text())
			$("#applicant_jobPeriod").val($("[id='applicant_jobPeriod" + id + "']").text())
			$("#applicant_jobType").val($("[id='applicant_jobType" + id + "']").text())
			$("#applicant_jobCategories").val($("[id='applicant_jobCategories" + id + "']").text())
			$("#applicant_jobDescription").val($("[id='applicant_jobDescription" + id + "']").text())
			$("#applicant_jobAgentDescription").val($("[id='applicant_jobAgentDescription" + id + "']").text())
			$("#applicant_jobCompanyDescription").val($("[id='applicant_jobCompanyDescription" + id + "']").text())

			var content = ''
			for(var i = 0; $("#applicant_jobQuestions" + i + id).length > 0; i++) {	
				content += '<div class="form-group marginform"><label for="recipient-name" class="col-form-label">' + $("#applicant_jobQuestions" + i + id).text() + '</label><input class="form-control" class="applicantQuestion" id="applicant_applicantQuestion' + i + '" type="text" readonly=readonly /></div>'
			}
			$("#applicant_applicantQuestions").html(content)
			for(var i = 0; $("#applicant_jobQuestions" + i + id).length > 0; i++) {	
				$('#applicant_applicantQuestion' + i).val($("[id='applicant_jobAnswers" + i + id + "']").text())
			}

			$("#applicant_applicantName").val($("[id='applicant_applicantName" + id + "']").text())
			$("#applicant_applicantMail").val($("[id='applicant_applicantMail" + id + "']").text())
			$("#applicant_applicantPhone").val($("[id='applicant_applicantPhone" + id + "']").text())
			$("#applicant_applicantAddress").val($("[id='applicant_applicantAddress" + id + "']").text())
			$("#applicant_applicantDescription").val($("[id='applicant_applicantDescription" + id + "']").text())
			$("#applicant_Date").val($("[id='applicant_Date" + id + "']").text())
			$("#applicant_applicantStatus").val($("[id='applicant_applicantStatus" + id + "']").text())
			$("#applicant_ManagerComment").val($("[id='applicant_ManagerComment" + id + "']").text())
			$("#applicant_downloadResumeLabel").text('הורד קורות חיים')
			$("#applicant_downloadResumeLabel").attr('href', $("[id='applicant_applicantResume" + id + "']").text())

			if(isAdmin()) {
				$("#applicant_applicantStatus").removeAttr('readonly')
				$("#applicant_ManagerComment").removeAttr('readonly')
				$("#updateApplicantStatus").show()
				$("#applicant_agentName").parent().show()
				$("#applicant_agentUID").parent().show()
			}
			else {
				$("#applicant_applicantStatus").attr('readonly', 'readonly')
				$("#applicant_ManagerComment").attr('readonly', 'readonly')
				$("#updateApplicantStatus").hide()
				$("#applicant_agentName").parent().hide()
				$("#applicant_agentUID").parent().hide()
			}

			$('#myModalApplicant').modal('show')
			$('textarea').trigger('input')
		}

		function showUser(id) {
			$("#user_UID").val(id)
			$("#user_Name").val($("[id='userName" + id + "']").text())
			$("#user_Status").val($("[id='userStatus" + id + "']").text())
			$("#user_Phone").val($("[id='userPhone" + id + "']").text())
			$("#user_Mail").val($("[id='userMail" + id + "']").text())
			$("#user_Address").val($("[id='userAddress" + id + "']").text())
			$("#user_Whatsapp").attr('href', 'https://api.whatsapp.com/send?phone=' + israelPhone($("[id='userPhone" + id + "']").text()) + '&text=%D7%90%D7%94%D7%9C%D7%9F,%20%D7%A7%D7%95%D7%A8%D7%90%D7%99%D7%9D%20%D7%9C%D7%99%20%D7%A9%D7%A8%D7%95%D7%9F%20%D7%95%D7%90%D7%A0%D7%99%20%D7%9E%D7%97%D7%91%D7%A8%D7%AA%20%D7%94%D7%A9%D7%9E%D7%94%20SVT.%20%D7%A2%D7%91%D7%A8%D7%AA%D7%99%20%D7%A2%D7%9C%20%D7%A7%D7%95%D7%A8%D7%95%D7%AA%20%D7%94%D7%97%D7%99%D7%99%D7%9D%20%D7%A9%D7%9C%D7%9A;%20%D7%9C%D7%93%D7%A2%D7%AA%D7%99%20%D7%94%D7%9D%20%D7%A0%D7%94%D7%93%D7%A8%D7%99%D7%9D%20%D7%95%D7%99%D7%A9%20%D7%9C%D7%99%20%D7%94%D7%A8%D7%91%D7%94%20%D7%9E%D7%A9%D7%A8%D7%95%D7%AA%20%D7%A9%D7%9E%D7%AA%D7%90%D7%99%D7%9E%D7%95%D7%AA%20%D7%9C%D7%9A%20:)%0A%20%D7%90%D7%A0%D7%99%20%D7%9E%D7%A6%D7%A8%D7%A3%20%D7%9C%D7%94%D7%95%D7%93%D7%A2%D7%94%20%D7%96%D7%95%20%D7%A7%D7%99%D7%A9%D7%95%D7%A8%20%D7%9C%D7%A8%D7%A9%D7%99%D7%9E%D7%AA%20%D7%94%D7%9E%D7%A9%D7%A8%D7%95%D7%AA.%20%D7%99%D7%A9%20%D7%9C%D7%91%D7%97%D7%95%D7%A8%20%D7%91%D7%A8%D7%90%D7%A9%20%D7%94%D7%90%D7%AA%D7%A8%20%D7%90%D7%AA%20%D7%94%D7%A7%D7%98%D7%92%D7%95%D7%A8%D7%99%D7%94%20%D7%94%D7%A8%D7%A6%D7%95%D7%99%D7%94%20%D7%95%D7%A0%D7%99%D7%AA%D7%9F%20%D7%92%D7%9D%20%D7%9C%D7%A1%D7%A0%D7%9F%20%D7%9C%D7%A4%D7%99%20%D7%A2%D7%99%D7%A8%5C%D7%90%D7%96%D7%95%D7%A8.%20%D7%9B%D7%9C%20%D7%9E%D7%94%20%D7%A9%D7%A6%D7%A8%D7%99%D7%9A%20%D7%9C%D7%A2%D7%A9%D7%95%D7%AA%20%D7%94%D7%95%D7%90%20%D7%9C%D7%9C%D7%97%D7%95%D7%A5%20%D7%A2%D7%9C%20%D7%94%D7%9E%D7%A9%D7%A8%D7%94%20%D7%A9%D7%94%D7%9B%D7%99%20%D7%90%D7%94%D7%91%D7%AA,%20%D7%9C%D7%A7%D7%A8%D7%95%D7%90%20%D7%90%D7%AA%20%D7%A4%D7%A8%D7%98%D7%99%D7%94%20%D7%95%D7%91%D7%9E%D7%99%D7%93%D7%94%20%D7%95%D7%94%D7%99%D7%90%20%D7%9E%D7%AA%D7%90%D7%99%D7%9E%D7%94%20%D7%9C%D7%9A%20-%20%D7%99%D7%A9%20%D7%9C%D7%A2%D7%A0%D7%95%D7%AA%20%D7%A2%D7%9C%20%22%D7%A9%D7%90%D7%9C%D7%95%D7%AA%20%D7%A1%D7%99%D7%A0%D7%95%D7%9F%22%20%D7%A9%D7%A0%D7%99%D7%AA%D7%9F%20%D7%9C%D7%9E%D7%A6%D7%95%D7%90%20%D7%A2%22%D7%99%20%D7%92%D7%9C%D7%92%D7%95%D7%9C%20%D7%9C%D7%9E%D7%98%D7%94%20%D7%91%D7%A4%D7%99%D7%A8%D7%95%D7%98%20%D7%94%D7%9E%D7%A9%D7%A8%D7%94,%20%D7%95%D7%9C%D7%9C%D7%97%D7%95%D7%A5%20%D7%A2%D7%9C%20%22%D7%94%D7%92%D7%A9%20%D7%9E%D7%95%D7%A2%D7%9E%D7%93%D7%95%D7%AA%22.%20*%D7%A2%D7%9C%20%D7%9E%D7%A0%D7%AA%20%D7%9C%D7%9E%D7%A7%D7%A1%D7%9D%20%D7%90%D7%AA%20%D7%A1%D7%99%D7%9B%D7%95%D7%99%D7%99%20%D7%94%D7%A7%D7%91%D7%9C%D7%94,%20%D7%9E%D7%95%D7%9E%D7%9C%D7%A5%20%D7%9E%D7%90%D7%95%D7%93%20%D7%9C%D7%94%D7%92%D7%99%D7%A9%20%D7%9E%D7%95%D7%A2%D7%9E%D7%93%D7%95%D7%AA%20%D7%9C%D7%9E%D7%A1%D7%A4%D7%A8%20%D7%9E%D7%A9%D7%A8%D7%95%D7%AA*%20%D7%95%D7%90%D7%A0%D7%99%20%D7%9B%D7%91%D7%A8%20%D7%90%D7%93%D7%90%D7%92%20%D7%9C%D7%99%D7%A6%D7%95%D7%A8%20%D7%90%D7%99%D7%AA%D7%9A%20%D7%A7%D7%A9%D7%A8%20%D7%A2%D7%9C%20%D7%9E%D7%A0%D7%AA%20%D7%9C%D7%AA%D7%90%D7%9D%20%D7%A8%D7%90%D7%99%D7%95%D7%9F%20%D7%A2%D7%91%D7%95%D7%93%D7%94%20%F0%9F%98%89.%20%D7%96%D7%94%20%D7%94%D7%A7%D7%99%D7%A9%D7%95%D7%A8:%0Ahttps://joblify.co.il/jobs/?UID%3D' + $("#user_UID").val())
			$("#user_WhatsappEmpty").attr('href', 'https://api.whatsapp.com/send?phone=' + israelPhone($("[id='userPhone" + id + "']").text()))
			$('#myModalUser').modal('show')
			$('textarea').trigger('input')
		}

		function israelPhone(phone) {
			return phone.replace('-', '').replace('0', '972').trim()
		}

		// Make the modal work with the back button
		$('.modal').on('show.bs.modal', function (e) {
			try {
				window.history.pushState('forward', null, './#')
			}
			catch(err) {}
		})
		$(".modal").on("hidden.bs.modal", function () {
			try {
				history.replaceState({}, document.title, ".")
			}
			catch(err) {}
		})
		if (window.history && window.history.pushState) {
			$(window).on('popstate', function () {
				$('.modal').modal('hide')
				try {
					history.replaceState({}, document.title, ".")
				}
				catch(err) {}
			})
		}

		//Auto size textarea
		$('textarea').each(function () {
			this.setAttribute('style', 'height:' + (this.scrollHeight) + 'px;overflow-y:hidden;')
		}).on('input', function () {
			this.style.height = 'auto'
			this.style.height = (this.scrollHeight) + 'px'
		})

		//Change file button name
		$("#applicantResume").change(function() {
			$("#applicantResumeLabel").text(this.files[0].name)
		})

		$("#freeSearch").on("change paste keyup", function() {
			search()
		})

		$('#categorySearch').on('change', function() {
			search()
		})

		$('#areaSearch').on('change', function() {
			search()
		})

		function showBackground() {
			$.LoadingOverlay("show", {
				image       : "",
				text        : "מעלה נתונים לשרת...",
				textColor   : "#EEEEEE",
				background  : "rgba(0, 0, 0, 0.8)",
				textResizeFactor    : "0.2"
			})
		}

		function makeid(length) {
			var result           = '';
			var characters       = 'ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789';
			var charactersLength = characters.length;
			for ( var i = 0; i < length; i++ ) {
				result += characters.charAt(Math.floor(Math.random() * charactersLength));
			}
			return result;
		}

		//Update applicant status
		$("#showApplicantStatus").submit(function(e) {
			e.preventDefault()
			showBackground()
			db.collection("Applicants").doc($('#applicant_docID').val()).set({
				Status: $('#applicant_applicantStatus').val(),
				ManagerComment: $('#applicant_ManagerComment').val()
			}, {merge: true})
			.then(function () {
				$.LoadingOverlay("hide")
			})
			.catch(function (error) {
				alert('Error sending data. Please contact your manager to resolve this issue\n\nError: ' + error)
				$.LoadingOverlay("hide")
			})
			$('.modal').modal('hide')
		})

		//Update applicant status
		$("#showUserStatus").submit(function(e) {
			e.preventDefault()
			showBackground()
			db.collection("Users").doc($('#user_UID').val()).set({
				Status: $('#user_Status').val()
			}, {merge: true})
			.then(function () {
				$.LoadingOverlay("hide")
			})
			.catch(function (error) {
				alert('Error sending data. Please contact your manager to resolve this issue\n\nError: ' + error)
				$.LoadingOverlay("hide")
			})
			$('.modal').modal('hide')
		})

		//Submit applicant
		$("#submitApplicant").submit(function(e) {
			e.preventDefault()
			if(document.getElementById('applicantResume').files.length <= 0) { //Mandatory fill out forms
				alert('Please upload a resume')
			}
			else if($("#applicantName").val().trim() == '') {
				alert('Please fill in the applicant name')
			}
			else if($("#applicantMail").val().trim() == '') {
				alert('Please fill in the applicant mail')
			}
			else if($("#applicantPhone").val().trim() == '') {
				alert('Please fill in the applicant phone')
			}
			else if($("#applicantAddress").val().trim() == '') {
				alert('Please fill in the applicant address')
			}
			else {
				showBackground()
				var jobID = $('#jobID').val()
				var resume = document.getElementById('applicantResume').files[0]
				var applicantForm = jQuery('#submitApplicant').serializeArray()
				// Mail Object
				var applicant = {'ID': jobID, 'UID': firestoreUser.uid, 'AgentName': firestoreUser.displayName}
				// Firestore Object
				var applicantFirestore = {'ID': jobID, 'UID': firestoreUser.uid, 'AgentName': firestoreUser.displayName, 'Questions': [], 'Status': 'חדש', 'ManagerComment': '', 'Date': firebase.firestore.FieldValue.serverTimestamp()}
				for (let i = 0; i < applicantForm.length; i++) {
					if(applicantForm[i]['name'].includes('jobQuestions') == false) {
						applicant[applicantForm[i]['name']] = applicantForm[i]['value']
						applicantFirestore[applicantForm[i]['name']] = applicantForm[i]['value']
					}
					else {
						var question = $('#' + applicantForm[i]['name']).text()
						var answer = applicantForm[i]['value']
						applicant[question] = answer
						applicantFirestore['Questions'].push({'Question': question, 'Answer': answer})
					}
				}
				
				firebase.storage().ref(jobID + '_' + makeid(5) + '_' + resume.name).put(resume).then(function(snapshot) {
					snapshot.ref.getDownloadURL().then(function(downloadURL) {
						applicant['Resume'] = downloadURL
						applicantFirestore['Resume'] = downloadURL
						db.collection("Applicants").add(
							applicantFirestore
						)
						.then(function () {
							$.LoadingOverlay("hide")
						})
						.catch(function (error) {
							alert('Error sending data. Please contact your manager to resolve this issue\n\nError: ' + error)
						})
					}).catch(function (error) {
						// An error happened
						console.log(error)
						alert('Error uploading resume')
						$.LoadingOverlay("hide")
					})
				}).catch(function (error) {
					// An error happened
					console.log(error)
					alert('Error uploading resume')
					$.LoadingOverlay("hide")
				})
				$('.modal').modal('hide')
			}
		})
	</script>
</body>

</html>